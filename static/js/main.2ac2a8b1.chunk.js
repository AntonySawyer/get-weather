(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),i=a.n(c),o=(a(16),a(4)),l=a(5),s=a(6),u=a(8),m=a(7),h=a(1),p=a(9),f="https://api.openweathermap.org/data/2.5/weather?q=",d="&appid=51835371b1252869b2e89700df1cdbba",w="&units=metric",y="https://api.weatherbit.io/v2.0/current?city=",v="&key=51b2268802424671a8d742c3c2e15eaf",E=function(e){return new Date(e).toTimeString().split(":").filter(function(e){return 2===e.length}).join(":")},g=(a(17),function(e){return r.a.createElement("section",{className:"geoPicker"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-map-marked-alt"})," ",e.cityName),r.a.createElement("div",{className:"joinInput"},r.a.createElement("input",{type:"text",id:"locationSearch",placeholder:"Or type..."}),r.a.createElement("button",{onClick:function(){return e.handleInput("cityName","#locationSearch")}},r.a.createElement("i",{className:"fas fa-search-location"}))),r.a.createElement("button",{onClick:function(){return e.getCity()}},"Auto detect"))}),N=(a(18),function(e){return r.a.createElement("section",{className:"providerPicker"},r.a.createElement("label",{htmlFor:"providerPicker"},r.a.createElement("i",{className:"fas fa-satellite-dish"})," "),r.a.createElement("select",{id:"providerPicker",onChange:function(){return e.handleInput("provider","#providerPicker")},defaultValue:e.default},r.a.createElement("option",{value:"owm"},"Open Weather Map"),r.a.createElement("option",{value:"wb"},"WeatherBit")))}),b=(a(19),function(e){return r.a.createElement("header",null,r.a.createElement(g,{cityName:e.cityName,handleInput:e.handleInput,getCity:e.getCity}),r.a.createElement(N,{default:e.provider,handleInput:e.handleInput}))}),k=(a(20),function(e){return r.a.createElement("section",{className:"weatherWrap"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-thermometer-half"}),r.a.createElement("span",{className:"weatherText temperature"},"Temperature - ",e.weather[0],"\u2103")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-bars"}),r.a.createElement("span",{className:"weatherText"},"Pressure - ",e.weather[1]," hPa")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-sun"}),r.a.createElement("span",{className:"weatherText"},"Sunrise - ",e.weather[2]," (UTC+3)")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-cloud-moon"}),r.a.createElement("span",{className:"weatherText"},"Sunset - ",e.weather[3]," (UTC+3)")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-cloud"}),r.a.createElement("span",{className:"weatherText"},"Sky - ",e.weather[4])))}),I=(a(21),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={cityName:"???",provider:localStorage.getItem("provider")||"owm",weather:new Array(5).fill("?")},a.handleInput=a.handleInput.bind(Object(h.a)(a)),a.getCity=a.getCity.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Date.now(),t=localStorage.getItem("cityName");!function(e){var t=Number(localStorage.getItem("lastLogin"));return(new Date(e)-new Date(t))/1e3/60/60>2}(e)&&"unavailable"!==t?this.storeValues([["cityName",t],["weather",localStorage.getItem("weather").split(",")]]):this.getCity(),this.storeValues([["lastLogin",e]])}},{key:"getCity",value:function(){var e=this;this.storeValues([["cityName","???"],["weather",new Array(5).fill("?")]]),fetch("https://api.ipify.org/?format=json").then(function(e){return e.json()}).then(function(t){fetch("https://ipapi.co/".concat(t.ip,"/json/")).then(function(e){return e.json()}).then(function(t){e.storeValues([["cityName","".concat(t.city,",").concat(t.country)]])}).then(function(){return e.getWeather()}).catch(function(e){return console.error(e),null})})}},{key:"getWeather",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.provider,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.cityName,n="owm"===t?"".concat(f).concat(a).concat(d).concat(w):"".concat(y).concat(a).concat(v);fetch(n).then(function(e){return e.json()}).then(function(a){var n=function(e,t){var a,n,r,c,i;switch(t){case"wb":a=e.data[0].temp,n=e.data[0].pres,r=e.data[0].sunrise,c=e.data[0].sunset,i=e.data[0].weather.description;break;case"owm":a=e.main.temp,n=e.main.pressure,r=E(1e3*e.sys.sunrise),c=E(1e3*e.sys.sunset),i=e.weather[0].description}return[a,n,r,c,i]}(a,t);e.storeValues([["weather",n]])}).catch(function(t){return console.error(t),e.storeValues([["cityName","unavailable"],["weather",new Array(5).fill("?")]]),null})}},{key:"storeValues",value:function(e){var t=this,a=["weather","provider","cityName","lastLogin"];e.forEach(function(e){t.state[e[0]]&&t.setState(Object(o.a)({},e[0],e[1])),a.includes(e[0])&&localStorage.setItem(e[0],e[1])})}},{key:"handleInput",value:function(e,t){var a=document.querySelector(t),n=a.value;""!==n&&(this.storeValues([["weather",new Array(5).fill("?")],[e,n]]),"provider"===e?this.getWeather(n):(this.getWeather(this.state.provider,n),a.value=""))}},{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(b,{cityName:this.state.cityName,handleInput:this.handleInput,provider:this.state.provider,getCity:this.getCity}),r.a.createElement("main",null,r.a.createElement(k,{weather:this.state.weather})))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.2ac2a8b1.chunk.js.map