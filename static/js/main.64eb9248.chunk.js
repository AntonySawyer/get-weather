(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),c=a.n(r),i=(a(16),a(4)),l=a(5),u=a(6),s=a(8),d=a(7),h=a(1),m=a(9),p="https://api.openweathermap.org/data/2.5/weather?",w="&appid=51835371b1252869b2e89700df1cdbba",g="&units=metric",f="https://api.weatherbit.io/v2.0/current?",y="&key=51b2268802424671a8d742c3c2e15eaf",v=function(e,t){var a,n,o,r,c;switch(t){case"wb":a=e.data[0].temp,n=e.data[0].pres,o=e.data[0].sunrise,r=e.data[0].sunset,c=e.data[0].weather.description;break;case"owm":a=e.main.temp,n=e.main.pressure,o=E(1e3*e.sys.sunrise),r=E(1e3*e.sys.sunset),c=e.weather[0].description}return[a,n,o,r,c]},E=function(e){return new Date(e).toTimeString().split(":").filter(function(e){return 2===e.length}).join(":")},b=function(){alert("Geolocation was denied by you or is not supported by this browser. We try detect city by IP."),fetch("https://api.ipify.org/?format=json").then(function(e){return e.json()}).then(function(e){return fetch("https://ipapi.co/".concat(e.ip,"/json/"))}).then(function(e){return e.json()}).then(function(e){return console.log([["cityName","".concat(e.city,",").concat(e.country)],["longitude","".concat(e.longitude)],["latitude","".concat(e.latitude)]]),[["cityName","".concat(e.city,",").concat(e.country)],["longitude","".concat(e.longitude)],["latitude","".concat(e.latitude)]]}).catch(function(e){return console.error(e),null})},N=(a(17),function(e){return o.a.createElement("section",{className:"geoPicker"},o.a.createElement("p",null,e.cityName),o.a.createElement("button",{onClick:e.getCity},"Autodetect"),o.a.createElement("div",{className:"joinInput"},o.a.createElement("button",{onClick:function(){return e.handleInput("cityName","#locationSearch")}},"Go!"),o.a.createElement("input",{type:"text",id:"locationSearch",placeholder:"Or type..."})))}),I=(a(18),function(e){return o.a.createElement("section",{className:"providerPicker"},o.a.createElement("label",{htmlFor:"providerPicker"},"Provider: "),o.a.createElement("select",{id:"providerPicker",onChange:function(){return e.handleInput("provider","#providerPicker")},defaultValue:e.default},o.a.createElement("option",{value:"owm"},"Open Weather Map"),o.a.createElement("option",{value:"wb"},"WeatherBit")))}),k=(a(19),function(e){return o.a.createElement("header",null,o.a.createElement(N,{cityName:e.cityName,handleInput:e.handleInput,getCity:e.getCity}),o.a.createElement(I,{default:e.provider,handleInput:e.handleInput}))}),j=(a(20),function(e){return o.a.createElement("section",{className:"weatherWrap"},o.a.createElement("p",null,o.a.createElement("span",{className:"weatherText temperature"},e.weather[0]," \u2103")),o.a.createElement("p",null,o.a.createElement("span",{className:"weatherText"},e.weather[4])),o.a.createElement("p",null,o.a.createElement("span",{className:"weatherText"},"Pressure - ",e.weather[1]," hPa")),o.a.createElement("p",null,o.a.createElement("span",{className:"weatherText"},"Sunrise - ",e.weather[2]," (UTC+3)")),o.a.createElement("p",null,o.a.createElement("span",{className:"weatherText"},"Sunset - ",e.weather[3]," (UTC+3)")))}),C=(a(21),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getCity=function(){a.storeValues([["cityName","???"],["weather",new Array(5).fill("?")]]);navigator.geolocation.getCurrentPosition(function(e){a.storeValues([["latitude",e.coords.latitude],["longitude",e.coords.longitude]]),a.getWeather()},function(){a.storeValues(b()),a.getWeather()})},a.getWeather=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.provider,t=arguments.length>1?arguments[1]:void 0,n=a.getEndpoint(e,t);fetch(n).then(function(e){return e.json()}).then(function(t){var n=v(t,e);console.log(t),a.storeValues([["weather",n],["cityName","owm"===e?"".concat(t.name,", ").concat(t.sys.country):"".concat(t.data[0].city_name,", ").concat(t.data[0].country_code)],["latitude","owm"===e?t.coord.lat:t.data[0].lat],["longitude","owm"===e?t.coord.lon:t.data[0].lon]])}).catch(function(e){return console.error(e),a.storeValues([["cityName","unavailable"],["weather",new Array(5).fill("?")]]),null})},a.storeValues=function(e){var t=["weather","provider","cityName","lastLogin","longitude","latitude"];e.forEach(function(e){a.setState(Object(i.a)({},e[0],e[1])),t.includes(e[0])&&localStorage.setItem(e[0],e[1])})},a.handleInput=function(e,t){var n=document.querySelector(t),o=n.value;""!==o&&(a.storeValues([["weather",new Array(5).fill("?")],[e,o]]),"provider"===e?a.getWeather(o):(a.getWeather(a.state.provider,o),n.value=""))},a.state={cityName:"???",provider:localStorage.getItem("provider")||"owm",weather:new Array(5).fill("?"),latitude:"",longitude:""},a.getEndpoint=a.getEndpoint.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Date.now(),t=localStorage.getItem("cityName");!function(e){var t=Number(localStorage.getItem("lastLogin"));return(new Date(e)-new Date(t))/1e3/60/60>2}(e)&&"unavailable"!==t?this.storeValues([["cityName",t],["weather",localStorage.getItem("weather").split(",")]]):this.getCity(),this.storeValues([["lastLogin",e]])}},{key:"getEndpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.provider,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?"owm"===e?"".concat(p,"q=").concat(t).concat(w).concat(g):"".concat(f,"city=").concat(t).concat(y):"owm"===e?"".concat(p,"&lat=").concat(this.state.latitude,"&lon=").concat(this.state.longitude).concat(w).concat(g):"".concat(f,"&lat=").concat(this.state.latitude,"&lon=").concat(this.state.longitude).concat(y)}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrapper"},o.a.createElement(k,{cityName:this.state.cityName,handleInput:this.handleInput,provider:this.state.provider,getCity:this.getCity}),o.a.createElement("main",null,o.a.createElement(j,{weather:this.state.weather})))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.64eb9248.chunk.js.map