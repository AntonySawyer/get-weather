(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(2),o=a.n(c),i=(a(15),a(3)),l=a(4),s=a(5),u=a(7),m=a(6),h=a(8),p="https://api.openweathermap.org/data/2.5/weather?q=",f="&appid=51835371b1252869b2e89700df1cdbba",d="&units=metric",w="https://api.weatherbit.io/v2.0/current?city=",y="&key=51b2268802424671a8d742c3c2e15eaf",g=function(e){return new Date(e).toTimeString().split(":").filter(function(e){return 2===e.length}).join(":")},v=(a(16),function(e){return r.a.createElement("section",{className:"geoPicker"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-map-marked-alt"})," ",e.cityName),r.a.createElement("div",{className:"joinInput"},r.a.createElement("input",{type:"text",id:"locationSearch",placeholder:"Or type..."}),r.a.createElement("button",{onClick:function(){return e.handleInput("cityName","#locationSearch")}},r.a.createElement("i",{className:"fas fa-search-location"}))),r.a.createElement("button",{onClick:e.getCity},"Detect by IP"),r.a.createElement("button",{onClick:function(){return function(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(E);else{var e=document.getElementById("alertGeo");e.innerHTML="Geolocation is not supported by this browser."}}()}},"Detect by geoposition"),r.a.createElement("span",{id:"alertGeo"}))});function E(e){fetch("https://geocode.xyz/".concat(e.coords.latitude,",").concat(e.coords.longitude,"?geoit=json")).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.error(e),null})}a(17);var N=function(e){return r.a.createElement("section",{className:"providerPicker"},r.a.createElement("label",{htmlFor:"providerPicker"},r.a.createElement("i",{className:"fas fa-satellite-dish"})," "),r.a.createElement("select",{id:"providerPicker",onChange:function(){return e.handleInput("provider","#providerPicker")},defaultValue:e.default},r.a.createElement("option",{value:"owm"},"Open Weather Map"),r.a.createElement("option",{value:"wb"},"WeatherBit")))},b=(a(18),function(e){return r.a.createElement("header",null,r.a.createElement(v,{cityName:e.cityName,handleInput:e.handleInput,getCity:e.getCity}),r.a.createElement(N,{default:e.provider,handleInput:e.handleInput}))}),k=(a(19),function(e){return r.a.createElement("section",{className:"weatherWrap"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-thermometer-half"}),r.a.createElement("span",{className:"weatherText temperature"},"Temperature - ",e.weather[0],"\u2103")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-bars"}),r.a.createElement("span",{className:"weatherText"},"Pressure - ",e.weather[1]," hPa")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-sun"}),r.a.createElement("span",{className:"weatherText"},"Sunrise - ",e.weather[2]," (UTC+3)")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-cloud-moon"}),r.a.createElement("span",{className:"weatherText"},"Sunset - ",e.weather[3]," (UTC+3)")),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-cloud"}),r.a.createElement("span",{className:"weatherText"},"Sky - ",e.weather[4])))}),I=(a(20),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getCity=function(){a.storeValues([["cityName","???"],["weather",new Array(5).fill("?")]]),fetch("https://api.ipify.org/?format=json").then(function(e){return e.json()}).then(function(e){return fetch("https://ipapi.co/".concat(e.ip,"/json/"))}).then(function(e){return e.json()}).then(function(e){return a.storeValues([["cityName","".concat(e.city,",").concat(e.country)]])}).then(function(){return a.getWeather()}).catch(function(e){return console.error(e),null})},a.handleInput=function(e,t){var n=document.querySelector(t),r=n.value;""!==r&&(a.storeValues([["weather",new Array(5).fill("?")],[e,r]]),"provider"===e?a.getWeather(r):(a.getWeather(a.state.provider,r),n.value=""))},a.state={cityName:"???",provider:localStorage.getItem("provider")||"owm",weather:new Array(5).fill("?")},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Date.now(),t=localStorage.getItem("cityName");!function(e){var t=Number(localStorage.getItem("lastLogin"));return(new Date(e)-new Date(t))/1e3/60/60>2}(e)&&"unavailable"!==t?this.storeValues([["cityName",t],["weather",localStorage.getItem("weather").split(",")]]):this.getCity(),this.storeValues([["lastLogin",e]])}},{key:"getWeather",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.provider,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.cityName,n="owm"===t?"".concat(p).concat(a).concat(f).concat(d):"".concat(w).concat(a).concat(y);fetch(n).then(function(e){return e.json()}).then(function(a){var n=function(e,t){var a,n,r,c,o;switch(t){case"wb":a=e.data[0].temp,n=e.data[0].pres,r=e.data[0].sunrise,c=e.data[0].sunset,o=e.data[0].weather.description;break;case"owm":a=e.main.temp,n=e.main.pressure,r=g(1e3*e.sys.sunrise),c=g(1e3*e.sys.sunset),o=e.weather[0].description}return[a,n,r,c,o]}(a,t);e.storeValues([["weather",n]])}).catch(function(t){return console.error(t),e.storeValues([["cityName","unavailable"],["weather",new Array(5).fill("?")]]),null})}},{key:"storeValues",value:function(e){var t=this,a=["weather","provider","cityName","lastLogin"];e.forEach(function(e){t.state[e[0]]&&t.setState(Object(i.a)({},e[0],e[1])),a.includes(e[0])&&localStorage.setItem(e[0],e[1])})}},{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(b,{cityName:this.state.cityName,handleInput:this.handleInput,provider:this.state.provider,getCity:this.getCity}),r.a.createElement("main",null,r.a.createElement(k,{weather:this.state.weather})))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.78786c3d.chunk.js.map